<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ garment.name }} - Version B</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .back-link {
            color: #10b981;
            text-decoration: none;
            font-size: 14px;
            display: inline-block;
            margin-bottom: 20px;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .version-badge {
            display: inline-block;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 30px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .product-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: start;
        }

        /* Left Side - Product Summary */
        .product-summary {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }

        /* Logo styling: centered and cropped */
        .brand-container {
            width: 110px;
            height: 110px; /* change this to control how much is shown vertically */
            margin: 0 auto 25px;
            overflow: hidden;
            display: block;
            border-radius: 6px; /* optional, remove if square crop desired */
        }

        .brand-logo {
            width: 100%;
            height: 100%;
            object-fit: cover; /* crop from top/bottom while keeping center */
            object-position: center;
            display: block;
        }

        /* LARGER product image container */
        .product-image-container {
            background: #f8f8f8;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 400px;
        }

        .product-image {
            width: 100%;
            max-width: 380px;
            border-radius: 8px;
            display: block;
        }

        .product-summary h2 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #333;
            display: inline-block;
        }

        .product-info {
            margin-top: 20px;
        }

        .info-row {
            display: flex;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .info-label {
            font-weight: 600;
            min-width: 120px;
        }

        .info-value {
            color: #555;
        }

        /* Right Side - Blockchain Section */
        .blockchain-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }

        .blockchain-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .blockchain-icon {
            font-size: 24px;
        }

        .blockchain-title {
            font-size: 22px;
            font-weight: 600;
        }

        .blockchain-intro {
            color: #666;
            margin-bottom: 25px;
            font-size: 15px;
        }

        .transaction-box {
            background: linear-gradient(135deg, #7c3aed, #8b5cf6);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .transaction-box .label {
            font-size: 13px;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .transaction-box .hash {
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 14px;
            word-break: break-all;
            margin-bottom: 10px;
        }

        .transaction-box .timestamp {
            font-size: 13px;
            opacity: 0.85;
        }

        .chain-icon {
            font-size: 20px;
            margin-right: 8px;
        }

        .ledger-section h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .ledger-entry {
            border: 1px solid #e5e7eb;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            background: #fafafa;
        }

        .stage-header {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 15px;
        }

        .stage-number {
            background: #10b981;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            flex-shrink: 0;
        }

        .stage-title {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 3px;
        }

        .stage-location {
            color: #666;
            font-size: 14px;
        }

        .stage-location::before {
            content: "üìç ";
        }

        .stage-details {
            margin-left: 43px;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
            font-size: 14px;
        }

        .detail-row:last-child {
            border-bottom: none;
        }

        .detail-label {
            color: #666;
        }

        .detail-value {
            font-weight: 500;
            text-align: right;
        }

        .detail-value.hash {
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 12px;
            color: #7c3aed;
            background: #f3f0ff;
            padding: 3px 8px;
            border-radius: 4px;
        }

        .renewable {
            color: #10b981;
        }

        /* Traceability Summary */
        .traceability-summary {
            background: #f0fdf4;
            border-left: 4px solid #10b981;
            padding: 20px;
            margin-top: 25px;
            border-radius: 0 8px 8px 0;
        }

        .traceability-summary h4 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            text-decoration: underline;
        }

        .traceability-summary p {
            color: #555;
            font-size: 14px;
            line-height: 1.7;
        }

        /* NEW: Bottom text section */
        .bottom-text {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid #e5e7eb;
        }

        .bottom-text h4 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }

        .bottom-text p {
            color: #666;
            font-size: 14px;
            line-height: 1.7;
        }

        .verify-link {
            display: inline-block;
            margin-top: 20px;
            color: #7c3aed;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
        }

        .verify-link:hover {
            text-decoration: underline;
        }

        @media (max-width: 900px) {
            .product-layout {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="#" class="back-link">‚Üê Back to Home</a>

        <div class="product-layout">
            <!-- Left Side: Product Summary -->
            <div class="product-summary">
                <!-- Logo at top -->
                <div class="brand-container">
                    <img src="{{ url_for('static', filename='logo.jpg') }}" alt="Naturae Logo" class="brand-logo">
                </div>

                <!-- Larger product image container -->
                <div class="product-image-container">
                    <img src="{{ garment.image }}" alt="{{ garment.name }}" class="product-image">
                </div>
                
                <h2>Product Summary (plain t-shirt)</h2>
                
                <div class="product-info">
                    <div class="info-row">
                        <span class="info-label">Product ID:</span>
                        <span class="info-value"> NAT-WTSH-2025-0148</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Material:</span>
                        <span class="info-value">100% organic cotton</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Color:</span>
                        <span class="info-value">White</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Fit:</span>
                        <span class="info-value">Regular Unisex</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Price:</span>
                        <span class="info-value">NT$350</span>
                    </div>
                </div>

                <div class="traceability-summary">
                    <h4>Traceability Summary</h4>
                    <p>This t-shirt is made from 100% organic cotton. The information above is recorded on a blockchain-based system, meaning each step in the supply chain is time-stamped and cannot be altered. You can see where the cotton was grown, how it was processed, where it was manufactured, and how it reached the store.</p>
                </div>

                <!-- NEW: Bottom text section -->
                <div class="bottom-text">
                    <h4>About Naturae</h4>
                    <p>Naturae is a sustainability-driven fashion brand committed to creating everyday essentials with minimal environmental impact. Our philosophy is simple: quality, transparency, and responsibility. Every product we make is crafted using ethically sourced materials and environmentally conscious production methods.</p>
                    <p style="margin-top: 12px;">We believe that consumers deserve honest information about where their clothes come from. That is why Naturae integrates blockchain-based traceability into our supply chain, allowing you to verify each step ‚Äî from raw materials to final delivery.</p>
                </div>
            </div>

            <!-- Right Side: Blockchain Verified Supply Chain -->
            <div class="blockchain-section">
                <div class="blockchain-header">
                    <span class="blockchain-icon">üîó</span>
                    <h2 class="blockchain-title">Blockchain Verified Supply Chain</h2>
                </div>

                <p class="blockchain-intro">
                    Every step of this garment's journey is recorded on an immutable blockchain 
                    ledger, providing transparent proof of our sustainability claims.
                </p>

                <div class="transaction-box">
                    <span class="chain-icon">‚õìÔ∏è</span>
                    <div class="label">Transaction Hash:</div>
                    <div class="hash">{{ garment.blockchain_data.transaction_hash }}</div>
                    <div class="timestamp">{{ garment.blockchain_data.timestamp }}</div>
                </div>

                <div class="ledger-section">
                    <h3>üìã Complete Supply Chain Ledger</h3>
                    
                    {% for stage in garment.blockchain_data.supply_chain %}
                    <div class="ledger-entry">
                        <div class="stage-header">
                            <span class="stage-number">{{ loop.index }}</span>
                            <div>
                                <div class="stage-title">{{ stage.stage }}</div>
                                <div class="stage-location">{{ stage.location }}</div>
                            </div>
                        </div>
                        <!-- Hard-coded explanatory paragraphs mapped to each stage index -->
                        <div class="stage-paragraph" style="margin-top:12px;color:#444;font-size:14px;line-height:1.6;">
                            {% if loop.index == 1 %}
                            <strong>1. Cotton Farming (Gujarat, India)</strong>
                            <p>The cotton used in this t-shirt was grown on certified organic farms in Gujarat, India. No synthetic pesticides or chemical fertilizers were used during cultivation. The cotton was harvested during the 2025 growing season and carefully separated from conventional cotton to maintain its organic integrity. Farmers followed environmentally responsible practices that protect soil health and local ecosystems.</p>
                            {% elif loop.index == 2 %}
                            <strong>2. Fabric Weaving (Dhaka, Bangladesh)</strong>
                            <p>After harvesting, the organic cotton was transported to a textile facility in Dhaka, Bangladesh, where it was spun into yarn and woven into fabric. This facility operates under Fair Trade standards, ensuring safe working conditions, fair wages, and ethical labor practices. The weaving process focused on minimizing waste while maintaining fabric durability and quality.</p>
                            {% elif loop.index == 3 %}
                            <strong>3. Dyeing &amp; Finishing (Colombo, Sri Lanka)</strong>
                            <p>The woven fabric was then sent to a dyeing and finishing facility in Colombo, Sri Lanka. Low-impact, non-toxic dyes were used to reduce water pollution and protect worker health. The finishing process complied with international safety standards, ensuring the final fabric is free from harmful substances and safe for everyday wear.</p>
                            {% elif loop.index == 4 %}
                            <strong>4. Garment Manufacturing (Hanoi, Vietnam)</strong>
                            <p>The finished fabric was assembled into t-shirts at a manufacturing facility in Hanoi, Vietnam. This factory is certified under the SA8000 Social Accountability standard, which means it follows strict rules to protect workers‚Äô rights, including safe working conditions, fair wages, and no child or forced labor. The production process focused on efficiency and quality while keeping carbon emissions low.</p>
                            {% elif loop.index == 5 %}
                            <strong>5. Distribution and Retail (Taiwan)</strong>
                            <p>After manufacturing, the t-shirts were shipped to Taiwan for distribution and retail. Naturea uses electric delivery vehicles, operates zero-waste retail stores, and stores products in a solar-powered warehouse to reduce environmental impact. This final stage focuses on delivering the product efficiently while minimizing emissions and energy use.</p>
                            {% endif %}
                        </div>
                        
                        <div class="stage-details">
                            <div class="detail-row">
                                <span class="detail-label">Verification:</span>
                                <span class="detail-value">{{ stage.verification }}</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Carbon Footprint:</span>
                                <span class="detail-value">{{ stage.carbon_footprint }}</span>
                            </div>
                            {% if stage.renewable_energy %}
                            <div class="detail-row">
                                <span class="detail-label">Energy Source:</span>
                                <span class="detail-value renewable">‚ö° {{ stage.renewable_energy }}</span>
                            </div>
                            {% endif %}
                            {% if stage.water_saved %}
                            <div class="detail-row">
                                <span class="detail-label">Water Saved:</span>
                                <span class="detail-value renewable">üíß {{ stage.water_saved }}</span>
                            </div>
                            {% endif %}
                            <div class="detail-row">
                                <span class="detail-label">Block Hash:</span>
                                <span class="detail-value hash">{{ stage.hash }}</span>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>

                <a href="https://sepolia.etherscan.io/address/0x1b0c842d7091d663ea44afdc11fdcef0cb9e9998" 
                   class="verify-link" target="_blank">
                    üîí Verify on Blockchain Explorer ‚Üí
                </a>
            </div>
        </div>
    </div>
</body>
</html>